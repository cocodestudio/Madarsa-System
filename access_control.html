<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Control - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        :root {
            --color-primary: #00A693;
            --color-background: #F2F3F4;
            --color-accent: #E08A27;
            --color-text-dark: #1A1A1A;
            --color-text-light: #FFFFFF;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');

        /* Language Styles */
        body,
        .lang-en {
            font-family: 'Poppins', sans-serif;
            direction: ltr;
            background-color: var(--color-background);
        }

        .lang-hi {
            font-family: 'Noto Sans Devanagari', sans-serif;
            direction: ltr;
        }

        .lang-ur {
            font-family: 'Noto Nastaliq Urdu', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
            direction: rtl;
            line-height: 1.8;
            text-align: right;
        }

        /* Form & Table Inputs */
        .form-input,
        select,
        .form-textarea {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid #ccc;
            width: 100%;
            font-family: inherit;
        }

        .form-input:focus,
        select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(0, 166, 147, 0.2);
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
        }

        /* Buttons */
        .primary-button {
            padding: 0.8rem 1.5rem;
            background-color: var(--color-primary);
            color: var(--color-text-light);
            font-weight: 600;
            border-radius: 0.75rem;
            transition: background-color 0.3s, transform 0.1s;
            box-shadow: 0 4px 10px rgba(0, 166, 147, 0.4);
            cursor: pointer;
        }

        .primary-button:hover {
            background-color: #008f7d;
            transform: translateY(-1px);
        }

        .action-button {
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        .delete-button {
            background-color: #fce8e8;
            color: #cc0000;
        }

        .delete-button:hover {
            background-color: #fcc;
        }

        /* Table Styling */
        .admin-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
        }

        .admin-table th {
            text-align: left;
            padding: 1rem 1.5rem;
            font-size: 0.875rem;
            color: gray;
            text-transform: uppercase;
            font-weight: 700;
        }

        .lang-ur .admin-table th {
            text-align: right;
        }

        .admin-table td {
            padding: 1rem 1.5rem;
            background-color: white;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
            font-size: 0.8775rem;
            font-weight: 500;
        }

        .admin-table tr td:first-child {
            border-top-left-radius: 0.75rem;
            border-bottom-left-radius: 0.75rem;
        }

        .admin-table tr td:last-child {
            border-top-right-radius: 0.75rem;
            border-bottom-right-radius: 0.75rem;
        }

        .lang-ur .admin-table tr td:first-child {
            border-radius: 0;
            border-top-right-radius: 0.75rem;
            border-bottom-right-radius: 0.75rem;
        }

        .lang-ur .admin-table tr td:last-child {
            border-radius: 0;
            border-top-left-radius: 0.75rem;
            border-bottom-left-radius: 0.75rem;
        }

        /* Modal Styles */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.6);
            transition: opacity 0.3s ease;
        }

        .modal-content {
            background-color: var(--color-background);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-radius: 1rem;
            max-width: 95%;
            width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        /* Fixed Header */
        header {
            background-color: var(--color-text-light);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            width: 100%;
            z-index: 10;
            padding: 1rem 2rem;
        }

        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .table-container table {
            min-width: 900px;
        }

        /* Permission Grid Styling */
        .permission-grid {
            width: 100%;
            border-collapse: collapse;
        }

        .permission-grid th,
        .permission-grid td {
            border: 1px solid #ddd;
            padding: 0.75rem;
            text-align: center;
        }

        .permission-grid th:first-child,
        .permission-grid td:first-child {
            text-align: left;
            font-weight: 600;
            width: 30%;
        }

        .permission-grid th {
            background-color: #f3f4f6;
            color: var(--color-text-dark);
            font-size: 0.75rem;
        }

        .lang-ur .permission-grid th:first-child,
        .lang-ur .permission-grid td:first-child {
            text-align: right;
        }

        .lang-ur .permission-grid th {
            text-align: center;
            /* Override default thead alignment */
        }
    </style>
</head>

<body class="lang-en">

    <script>
        // --- Dummy Data ---
        let dummyRoles = [
            {
                id: 1, name: 'System Admin', description: 'Full access to all modules and configurations.',
                permissions: { Academic: { C: true, R: true, U: true, D: true }, Accounting: { C: true, R: true, U: true, D: true }, Hostel: { C: true, R: true, U: true, D: true }, Library: { C: true, R: true, U: true, D: true } }
            },

            {
                id: 2, name: 'Teacher', description: 'Access to academic records of assigned classes (Read/Edit only).',
                permissions: { Academic: { C: false, R: true, U: true, D: false }, Accounting: { C: false, R: false, U: false, D: false }, Hostel: { C: false, R: true, U: false, D: false }, Library: { C: false, R: true, U: false, D: false } }
            },

            {
                id: 3, name: 'Accountant', description: 'Full access to financial and fee collection modules.',
                permissions: { Academic: { C: false, R: false, U: false, D: false }, Accounting: { C: true, R: true, U: true, D: true }, Hostel: { C: false, R: true, U: false, D: false }, Library: { C: false, R: false, U: false, D: false } }
            },
        ];

        const ACCESS_STORAGE_KEY = 'madarsaAccessRoles';
        const MODULES = ['Academic', 'Accounting', 'Hostel', 'Library', 'Kitchen'];
        const ACTIONS = ['R', 'C', 'U', 'D']; // Read, Create, Update, Delete

        // Initialize/Load Roles from localStorage
        function loadRoles() {
            const storedRoles = localStorage.getItem(ACCESS_STORAGE_KEY);
            if (storedRoles) {
                try {
                    dummyRoles = JSON.parse(storedRoles);
                } catch (e) {
                    console.error("Error loading access roles:", e);
                }
            } else {
                // Save initial dummy data if storage is empty
                saveRoles();
            }
        }

        // Save Roles to localStorage
        function saveRoles() {
            localStorage.setItem(ACCESS_STORAGE_KEY, JSON.stringify(dummyRoles));
        }

        // --- Multilingual Data ---
        const langData = {
            'en': {
                'admin_title': 'Admin Panel',
                'page_title': 'Access Control',
                'description': 'Manage user roles and define module permissions (Read, Create, Update, Delete).',
                'back_to_admin': 'Back to Admin',
                'logout': 'Logout',
                'search_placeholder': 'Search by Role Name...',
                'add_new': 'Add New Role',

                // Table Headers
                'id': 'ID',
                'role_name': 'Role Name',
                'description_short': 'Description',
                'actions': 'Actions',
                'view': 'View',
                'edit': 'Edit',
                'delete': 'Delete',
                'read': 'Read (R)',
                'create': 'Create (C)',
                'update': 'Update (U)',
                'delete_action': 'Delete (D)',

                // Modules
                'Academic': 'Academic',
                'Accounting': 'Accounting',
                'Hostel': 'Hostel',
                'Library': 'Library',
                'Kitchen': 'Kitchen',

                // Modal
                'modal_add_title': 'Define New User Role',
                'modal_edit_title': 'Edit Role Permissions',
                'modal_view_title': 'View Role Permissions',
                'role_name_form': 'Role Name',
                'role_description': 'Role Description',
                'permissions_matrix': 'Permissions Matrix',
                'save': 'Save Role',
                'cancel': 'Cancel',
                'form_success_add': 'New Role defined successfully!',
                'form_success_edit': 'Role updated successfully!',
                'confirm_delete': 'Are you sure you want to delete this Role? All users assigned this role will lose access.'
            },
            'hi': {
                'admin_title': 'एडमिन पैनल',
                'page_title': 'पहुँच नियंत्रण',
                'description': 'उपयोगकर्ता भूमिकाएँ प्रबंधित करें और मॉड्यूल अनुमतियाँ (देखें, बनाएं, अपडेट करें, हटाएँ) परिभाषित करें।',
                'back_to_admin': 'एडमिन पर वापस',
                'logout': 'लॉगआउट',
                'search_placeholder': 'भूमिका नाम से खोजें...',
                'add_new': 'नई भूमिका जोड़ें',

                // Table Headers
                'id': 'आईडी',
                'role_name': 'भूमिका का नाम',
                'description_short': 'विवरण',
                'actions': 'कार्यवाही',
                'view': 'देखें',
                'edit': 'संपादित करें',
                'delete': 'हटाएँ',
                'read': 'पढ़ें (R)',
                'create': 'बनाएँ (C)',
                'update': 'अपडेट करें (U)',
                'delete_action': 'हटाएँ (D)',

                // Modules
                'Academic': 'शैक्षणिक',
                'Accounting': 'लेखांकन',
                'Hostel': 'छात्रावास',
                'Library': 'पुस्तकालय',
                'Kitchen': 'रसोईघर',

                // Modal
                'modal_add_title': 'नई उपयोगकर्ता भूमिका परिभाषित करें',
                'modal_edit_title': 'भूमिका अनुमतियाँ संपादित करें',
                'modal_view_title': 'भूमिका अनुमतियाँ देखें',
                'role_name_form': 'भूमिका का नाम',
                'role_description': 'भूमिका का विवरण',
                'permissions_matrix': 'अनुमतियाँ मैट्रिक्स',
                'save': 'भूमिका सहेजें',
                'cancel': 'रद्द करें',
                'form_success_add': 'नई भूमिका सफलतापूर्वक परिभाषित की गई!',
                'form_success_edit': 'भूमिका सफलतापूर्वक अपडेट की गई!',
                'confirm_delete': 'क्या आप निश्चित रूप से यह भूमिका हटाना चाहते हैं? इस भूमिका को सौंपे गए सभी उपयोगकर्ता पहुँच खो देंगे।'
            },
            'ur': {
                'admin_title': 'ایڈمن پینل',
                'page_title': 'رسائی کنٹرول',
                'description': 'صارف کے کرداروں کا نظم کریں اور ماڈیول کی اجازتوں کی وضاحت کریں (دیکھیں، بنائیں، اپ ڈیٹ کریں، حذف کریں).',
                'back_to_admin': 'ایڈمن پر واپس جائیں',
                'logout': 'لاگ آؤٹ',
                'search_placeholder': 'کردار کے نام سے تلاش کریں...',
                'add_new': 'نیا کردار شامل کریں',

                // Table Headers
                'id': 'آئی ڈی',
                'role_name': 'کردار کا نام',
                'description_short': 'تفصیل',
                'actions': 'عمل',
                'view': 'دیکھیں',
                'edit': 'ترمیم کریں',
                'delete': 'حذف کریں',
                'read': 'پڑھیں (R)',
                'create': 'تخلیق کریں (C)',
                'update': 'اپ ڈیٹ کریں (U)',
                'delete_action': 'حذف کریں (D)',

                // Modules
                'Academic': 'تعلیمی',
                'Accounting': 'اکاؤنٹنگ',
                'Hostel': 'ہاسٹل',
                'Library': 'لائبریری',
                'Kitchen': 'باورچی خانہ',

                // Modal
                'modal_add_title': 'نیا صارف کردار متعین کریں',
                'modal_edit_title': 'کردار کی اجازتوں میں ترمیم کریں',
                'modal_view_title': 'کردار کی اجازتیں دیکھیں',
                'role_name_form': 'کردار کا نام',
                'role_description': 'کردار کی تفصیل',
                'permissions_matrix': 'اجازتوں کا میٹرکس',
                'save': 'کردار محفوظ کریں',
                'cancel': 'منسوخ کریں',
                'form_success_add': 'نیا کردار کامیابی سے بیان کیا گیا!',
                'form_success_edit': 'کردار کامیابی سے اپ ڈیٹ ہو گیا!',
                'confirm_delete': 'کیا آپ واقعی یہ کردار حذف کرنا چاہتے ہیں؟ اس کردار کو تفویض کردہ تمام صارفین تک رسائی ختم ہو جائے گی۔'
            }
        };

        let currentLang = 'en';

        function getTranslation(key) {
            return langData[currentLang][key] || langData['en'][key] || key;
        }

        // Helper to get role by ID
        function getRoleById(id) {
            // IDs are numbers
            return dummyRoles.find(role => role.id === id);
        }

        function updateContent() {
            document.body.className = 'lang-' + currentLang;

            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                el.textContent = getTranslation(key);
            });

            renderTable(filterRoles());
        }

        function changeLanguage(lang) {
            if (lang in langData) {
                currentLang = lang;
                localStorage.setItem('madarsaSystemLang', lang);
                updateContent();
            }
        }

        // --- Table Rendering ---
        function renderTable(roleList) {
            const tbody = document.getElementById('roles-table-body');
            if (!tbody) return;
            tbody.innerHTML = '';

            roleList.forEach(role => {
                const tr = document.createElement('tr');

                const descriptionDisplay = role.description.substring(0, 70) + (role.description.length > 70 ? '...' : '');

                tr.innerHTML = `
                    <td>${role.id}</td>
                    <td class="font-bold text-gray-800">${role.name}</td>
                    <td>${descriptionDisplay}</td>
                    <td>
                        <button onclick="handleAction('view', ${role.id})" class="action-button bg-blue-100 text-blue-700 hover:bg-blue-200">${getTranslation('view')}</button>
                        <button onclick="handleAction('edit', ${role.id})" class="action-button bg-yellow-100 text-yellow-700 hover:bg-yellow-200 ml-2">${getTranslation('edit')}</button>
                        <button onclick="handleAction('delete', ${role.id})" class="action-button delete-button hover:bg-red-200 ml-2">${getTranslation('delete')}</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- Filter Logic ---
        function filterRoles() {
            const search = document.getElementById('search-input').value.toLowerCase();

            return dummyRoles.filter(role => {
                const matchesSearch = role.name.toLowerCase().includes(search) ||
                    role.description.toLowerCase().includes(search);
                return matchesSearch;
            });
        }

        function handleFilter() {
            renderTable(filterRoles());
        }

        // --- Modal Handling ---
        function openAccessModal(titleKey, contentHtml) {
            const modal = document.getElementById('access-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');

            modalTitle.textContent = getTranslation(titleKey);
            modalBody.innerHTML = contentHtml;

            modal.classList.remove('hidden');
            setTimeout(() => { modal.classList.remove('opacity-0'); }, 10);
        }

        function closeAccessModal() {
            const modal = document.getElementById('access-modal');
            modal.classList.add('opacity-0');
            setTimeout(() => { modal.classList.add('hidden'); }, 300);
        }

        // --- Content Creators ---
        function createPermissionGrid(permissions, isReadOnly = true) {
            let gridHtml = `<table class="permission-grid">
                <thead>
                    <tr>
                        <th>${getTranslation('module_name') || 'Module'}</th>
                        <th>${getTranslation('read')}</th>
                        <th>${getTranslation('create')}</th>
                        <th>${getTranslation('update')}</th>
                        <th>${getTranslation('delete_action')}</th>
                    </tr>
                </thead>
                <tbody>`;

            MODULES.forEach(module => {
                const moduleKey = module;
                const modulePermissions = permissions[moduleKey] || { R: false, C: false, U: false, D: false };
                gridHtml += `<tr>
                    <td>${getTranslation(moduleKey)}</td>`;

                ACTIONS.forEach(action => {
                    const checked = modulePermissions[action] ? 'checked' : '';
                    const disabled = isReadOnly ? 'disabled' : '';
                    const inputId = `perm-${moduleKey}-${action}`;

                    if (isReadOnly) {
                        gridHtml += `<td>${modulePermissions[action] ? '✅' : '❌'}</td>`;
                    } else {
                        gridHtml += `<td>
                            <input type="checkbox" id="${inputId}" data-module="${moduleKey}" data-action="${action}" class="form-checkbox h-5 w-5" ${checked} ${disabled} style="color: var(--color-primary);">
                        </td>`;
                    }
                });

                gridHtml += `</tr>`;
            });
            gridHtml += `</tbody></table>`;
            return gridHtml;
        }

        function createRoleForm(role = null) {
            const isEdit = role !== null;
            const isRtl = currentLang === 'ur';
            const alignment = isRtl ? 'text-right' : 'text-left';
            const currentPermissions = isEdit ? role.permissions : {};

            return `
                <form id="role-form" onsubmit="return saveRoleDetails(event, ${isEdit ? role.id : 'null'})" class="${alignment}">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-8">
                        
                        <!-- Role Name -->
                        <div class="form-group">
                            <label for="role-name" class="form-label">${getTranslation('role_name_form')}</label>
                            <input type="text" id="role-name" class="form-input" value="${isEdit ? role.name : ''}" required>
                        </div>
                        
                        <!-- Role Description (Full Width) -->
                        <div class="form-group md:col-span-2">
                            <label for="role-description" class="form-label">${getTranslation('role_description')}</label>
                            <textarea id="role-description" class="form-textarea h-20">${isEdit ? role.description : ''}</textarea>
                        </div>
                    </div>

                    <!-- Permissions Matrix -->
                    <h3 class="text-lg font-bold text-gray-700 mb-4" data-lang-key="permissions_matrix">${getTranslation('permissions_matrix')}</h3>
                    ${createPermissionGrid(currentPermissions, false)}

                    <div class="flex justify-end space-x-4 mt-6">
                        <button type="button" onclick="closeAccessModal()" class="action-button bg-gray-200 text-gray-700 hover:bg-gray-300">${getTranslation('cancel')}</button>
                        <button type="submit" class="primary-button">${getTranslation('save')}</button>
                    </div>
                </form>
            `;
        }

        function createViewContent(role) {
            const isRtl = currentLang === 'ur';
            const alignment = isRtl ? 'text-right' : 'text-left';

            return `
                <div class="space-y-4 ${alignment}">
                    <h2 class="text-2xl font-bold text-gray-800">${role.name}</h2>
                    <p class="text-gray-500">${getTranslation('role_description')}: ${role.description}</p>

                    <div class="border-t pt-4">
                        <h3 class="text-lg font-bold mb-3 text-gray-700">${getTranslation('permissions_matrix')}</h3>
                        ${createPermissionGrid(role.permissions, true)}
                    </div>
                    
                    <div class="flex justify-end pt-4 border-t">
                        <button onclick="handleAction('edit', ${role.id})" class="action-button bg-yellow-100 text-yellow-700 hover:bg-yellow-200">${getTranslation('edit')}</button>
                    </div>
                </div>
            `;
        }

        // --- Action Dispatcher (Add/View/Edit/Delete) ---
        function handleAction(action, id) {
            const role = id ? getRoleById(id) : null;

            if (action === 'add') {
                openAccessModal('modal_add_title', createRoleForm(null));
            } else if (!role && action !== 'add') {
                console.error(`Role not found with ID: ${id}`);
                return;
            } else if (action === 'view') {
                openAccessModal('modal_view_title', createViewContent(role));
            } else if (action === 'edit') {
                openAccessModal('modal_edit_title', createRoleForm(role));
            } else if (action === 'delete') {
                if (confirm(getTranslation('confirm_delete'))) {
                    deleteRole(id);
                }
            }
        }

        // --- Delete Logic ---
        function deleteRole(id) {
            dummyRoles = dummyRoles.filter(r => r.id !== id);
            saveRoles();
            handleFilter();
            alert(`Role ID ${id} deleted successfully.`);
        }

        // --- Save Logic (Add/Edit) ---
        function saveRoleDetails(event, id) {
            event.preventDefault();

            const form = event.target;
            const name = form.querySelector('#role-name').value;
            const description = form.querySelector('#role-description').value;

            // Gather permissions from the grid
            const newPermissions = {};
            MODULES.forEach(module => {
                newPermissions[module] = {};
                ACTIONS.forEach(action => {
                    const input = form.querySelector(`#perm-${module}-${action}`);
                    newPermissions[module][action] = input ? input.checked : false;
                });
            });

            if (!name) {
                alert("Please enter a Role Name.");
                return false;
            }

            if (id) {
                // EDIT LOGIC
                const roleIndex = dummyRoles.findIndex(r => r.id === id);
                if (roleIndex !== -1) {
                    dummyRoles[roleIndex] = {
                        ...dummyRoles[roleIndex],
                        name, description, permissions: newPermissions
                    };
                    alert(getTranslation('form_success_edit'));
                }
            } else {
                // ADD LOGIC
                const newId = Math.max(...dummyRoles.map(r => r.id)) + 1;
                const newRole = {
                    id: newId, name, description, permissions: newPermissions
                };
                dummyRoles.unshift(newRole);
                alert(getTranslation('form_success_add'));
            }

            saveRoles();
            closeAccessModal();
            updateContent(); // Update filters and table
            return false;
        }

        // Initialize content and language
        window.onload = function () {
            loadRoles(); // Load data
            const storedLang = localStorage.getItem('madarsaSystemLang');
            currentLang = (storedLang && storedLang in langData) ? storedLang : 'en';

            // Initial content update and table render
            updateContent();

            // Attach event listeners to filters
            document.getElementById('search-input').addEventListener('input', handleFilter);
        };
    </script>

    <!-- HEADER -->
    <header>
        <div class="max-w-7xl mx-auto w-full flex justify-between items-center">
            <!-- Left: Back Button & Title -->
            <div class="flex items-center space-x-4">
                <a href="administration.html" class="action-button bg-gray-100 text-gray-700 hover:bg-gray-200"
                    data-lang-key="back_to_admin">Back to Admin</a>
                <h1 class="text-xl font-bold" data-lang-key="page_title" style="color: var(--color-primary);">Access
                    Control</h1>
            </div>

            <!-- Right: Language Switch -->
            <div class="flex items-center space-x-2">
                <select onchange="changeLanguage(this.value)" class="bg-gray-100 rounded-lg p-1 text-sm">
                    <option value="en" selected>English</option>
                    <option value="hi">हिन्दी</option>
                    <option value="ur">اردو</option>
                </select>
                <button onclick="window.location.href='login.html'"
                    class="text-sm font-semibold text-red-600 hover:text-red-800 transition-colors ml-4"
                    data-lang-key="logout">Logout</button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT AREA -->
    <main class="max-w-7xl mx-auto w-full p-4 md:p-8">
        <div class="bg-white p-6 md:p-8 rounded-xl shadow-2xl">

            <!-- Description and Action Button -->
            <div
                class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 space-y-4 md:space-y-0">
                <div>
                    <h2 class="text-2xl font-bold text-gray-700" data-lang-key="page_title">Access Control</h2>
                    <p class="text-gray-500 mt-1 text-sm" data-lang-key="description">Manage user roles and define
                        module permissions (Read, Create, Update, Delete).</p>
                </div>

                <!-- Add New Button - Opens Modal -->
                <button onclick="handleAction('add', null)" class="primary-button flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                    </svg>
                    <span data-lang-key="add_new">Add New Role</span>
                </button>
            </div>

            <!-- Filter and Search Controls -->
            <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 mb-8">

                <!-- Search -->
                <div class="sm:col-span-4 relative">
                    <input type="text" id="search-input" class="form-input pl-10" data-lang-key="search_placeholder"
                        placeholder="Search by Role Name...">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>

            <!-- Roles Table -->
            <div class="table-container">
                <table class="admin-table">
                    <thead>
                        <tr class="bg-gray-100 rounded-lg">
                            <th data-lang-key="id">ID</th>
                            <th data-lang-key="role_name">Role Name</th>
                            <th data-lang-key="description_short">Description</th>
                            <th data-lang-key="actions">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="roles-table-body">
                        <!-- Roles data will be injected here by JS -->
                    </tbody>
                </table>
            </div>

            <div class="text-center text-sm text-gray-500 mt-6">
                Showing 1 to 3 of 3 entries
            </div>

        </div>
    </main>

    <!-- ACCESS CONTROL VIEW/EDIT/ADD MODAL -->
    <div id="access-modal"
        class="hidden opacity-0 fixed inset-0 z-50 flex items-center justify-center modal-backdrop transition-opacity duration-300">
        <div class="modal-content p-6 md:p-8 transform scale-100 transition-transform duration-300"
            style="border: 3px solid var(--color-primary);">
            <div class="flex justify-between items-start pb-4 border-b mb-6">
                <h3 id="modal-title" class="text-xl font-bold text-gray-700">Role Permissions</h3>
                <button onclick="closeAccessModal()" class="text-gray-500 hover:text-gray-900 transition-colors p-1"
                    aria-label="Close">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="modal-body">
                <!-- Dynamic content (View or Edit/Add Form) goes here -->
            </div>
        </div>
    </div>
</body>

</html>